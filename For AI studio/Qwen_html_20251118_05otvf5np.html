<script>
  // تقویم شمسی ساده (بدون کتابخانه خارجی - فقط تاریخ را به صورت متن می‌گیرد)
  document.getElementById('start-date').addEventListener('click', () => {
    alert('در نسخه نهایی، از VazirCal استفاده می‌شود. اینجا برای تست، تاریخ را دستی وارد کنید.\nمثال: ۱۴۰۴/۰۲/۱۵');
  });

  // محاسبه تاریخ پایان
  document.querySelectorAll('input[name="duration"]').forEach(radio => {
    radio.addEventListener('change', () => {
      const start = document.getElementById('start-date').value;
      if (!start) return;
      const days = radio.value === '4' ? 28 : 84;
      const date = new Date(start.replace(/\//g, '-'));
      date.setDate(date.getDate() + days);
      document.getElementById('end-date').value = date.toLocaleDateString('fa-IR');
    });
  });

  // افزودن ردیف جدید به جدول
  document.getElementById('add-row-btn').addEventListener('click', () => {
    const tbody = document.getElementById('exercise-rows');
    const row = tbody.insertRow();
    row.innerHTML = `
      <td class="p-2 border border-gray-700">1</td>
      <td class="p-2 border border-gray-700"><span class="text-primary cursor-pointer hover:underline">اسکوات</span> <span class="ml-1 text-xs text-primary">▶</span></td>
      <td class="p-2 border border-gray-700">عادی</td>
      <td class="p-2 border border-gray-700"><input type="text" value="10-8-8" class="w-full bg-transparent border-none text-center" /></td>
      <td class="p-2 border border-gray-700"><input type="text" value="4" class="w-full bg-transparent border-none text-center" /></td>
      <td class="p-2 border border-gray-700">معمولی</td>
      <td class="p-2 border border-gray-700">60</td>
      <td class="p-2 border border-gray-700"><button class="text-danger">حذف</button></td>
    `;
  });

  // افزودن روز جدید
  document.getElementById('add-day-btn').addEventListener('click', () => {
    alert('در نسخه نهایی، هر روز به صورت جداگانه اضافه می‌شود. اینجا برای تست، فقط یک روز نمایش داده می‌شود.');
  });

  // باز کردن پاپ‌آپ حرکات (با کلیک روی "اسکوات" یا ▶)
  document.addEventListener('click', e => {
    if (e.target.classList.contains('text-primary') && e.target.textContent === 'اسکوات') {
      alert('در نسخه نهایی، اینجا یک پاپ‌آپ با لیست حرکات و جستجو باز می‌شود.\nهر حرکت به ویدیوی مربوطه متصل می‌شود.');
    }
    if (e.target.textContent === '▶') {
      alert('ویدیوی این حرکت در نسخه نهایی باز می‌شود.');
    }
  });

  // نمایش بلوک تمرینی پس از کلیک روی شروع
  document.getElementById('start-program-btn').addEventListener('click', () => {
    document.getElementById('exercise-day-block').classList.remove('hidden');
    document.getElementById('submit-program-btn').classList.remove('hidden');
  });

  // ارسال برنامه
  document.getElementById('submit-program-btn').addEventListener('click', () => {
    alert('برنامه با موفقیت ثبت و به کاربر ارسال شد!');
  });
</script>